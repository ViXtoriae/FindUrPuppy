

<style> 
  /* Couleur globale du texte selon le th√®me */
body.theme-rose {
  color: #ff69b4 !important;
}

body.theme-vert {
  color: #32cd32 !important;
}

body.theme-bleu {
  color: #1e90ff !important;
}

</style>
<!-- Nouvelle section Param√®tres -->
<section id="settings" style="max-width:1100px;margin:60px auto;padding:30px;background:white;border-radius:18px;box-shadow:0 4px 12px rgba(0,0,0,0.1);">
  <h2 style="text-align:center;font-size:28px;color:#ff7f50;margin-bottom:25px;">‚öôÔ∏è Param√®tres du site</h2>

  <div class="settings-grid" style="display:flex;flex-wrap:wrap;gap:25px;justify-content:center;">

    <!-- APPARENCE -->
    <div class="setting-card" style="width:300px;padding:20px;border-radius:14px;background:#fafafa;box-shadow:0 3px 10px rgba(0,0,0,0.08);">
      <h3 style="margin-bottom:10px;color:#ff7f50;">üé® Apparence</h3>
      <label class="switch-label">Mode Sombre
        <input type="checkbox" id="darkmode-toggle" />
        <span class="switch-slider"></span>
      </label><br/><br/>
      <label>Th√®me de couleur</label>
      <select id="theme-select" style="width:100%;padding:8px;border-radius:8px;margin-top:6px;">
        <option value="default">Classique</option>
        <option value="rose">Rose</option>
        <option value="vert">Vert</option>
        <option value="bleu">Bleu</option>
      </select><br/><br/>
      <label for="fontsize-range">Taille du texte</label><br/>
      <input type="range" min="14" max="22" id="fontsize-range" style="width:100%;" />
    </div>

    <!-- PREFERENCES UTILISATEUR -->
    <div class="setting-card" style="width:300px;padding:20px;border-radius:14px;background:#fafafa;box-shadow:0 3px 10px rgba(0,0,0,0.08);">
      <h3 style="margin-bottom:10px;color:#ff7f50;">‚ù§Ô∏è Pr√©f√©rences</h3>
      <label>Animal pr√©f√©r√©</label>
      <select id="fav-animal" style="width:100%;padding:8px;border-radius:8px;margin-top:6px;">
        <option value="chat">Chat</option>
        <option value="chien">Chien</option>
        <option value="autre">Autre</option>
      </select><br/><br/>
      <label class="switch-label">Notifications
        <input type="checkbox" id="notif-toggle" />
        <span class="switch-slider"></span>
      </label>
    </div>

    <!-- ACCESSIBILITE -->
    <div class="setting-card" style="width:300px;padding:20px;border-radius:14px;background:#fafafa;box-shadow:0 3px 10px rgba(0,0,0,0.08);">
      <h3 style="margin-bottom:10px;color:#ff7f50;">üß© Accessibilit√©</h3>
      <label class="switch-label">Lecteur d'√©cran
        <input type="checkbox" id="screenreader-toggle" />
        <span class="switch-slider"></span>
      </label><br/><br/>
      <label class="switch-label">R√©duire animations
        <input type="checkbox" id="reduce-anim-toggle" />
        <span class="switch-slider"></span>
      </label><br/><br/>
      <label class="switch-label">Contraste √©lev√©
        <input type="checkbox" id="contrast-toggle" />
        <span class="switch-slider"></span>
      </label>
    </div>

    <!-- UTILISATEUR -->
    <div class="setting-card" style="width:300px;padding:20px;border-radius:14px;background:#fafafa;box-shadow:0 3px 10px rgba(0,0,0,0.08);">
      <h3 style="margin-bottom:10px;color:#ff7f50;">üë§ Utilisateur</h3>
      <label>Nom</label>
      <input type="text" id="user-name" style="width:100%;padding:8px;border-radius:8px;margin-top:6px;" /><br/><br/>
      <label>Email</label>
      <input type="email" id="user-email" style="width:100%;padding:8px;border-radius:8px;margin-top:6px;" /><br/><br/>
      <label>Avatar</label>
      <input type="text" id="user-avatar" placeholder="URL de l'image" style="width:100%;padding:8px;border-radius:8px;margin-top:6px;" /><br/>
      <img id="avatar-preview" src="" alt="Avatar" style="width:80px;height:80px;border-radius:50%;margin-top:10px;object-fit:cover;display:none;" />
    </div>

    <!-- COMPORTEMENT -->
    <div class="setting-card" style="width:300px;padding:20px;border-radius:14px;background:#fafafa;box-shadow:0 3px 10px rgba(0,0,0,0.08);">
      <h3 style="margin-bottom:10px;color:#ff7f50;">‚ö° Comportement</h3>
      <label class="switch-label">Animations actives
        <input type="checkbox" id="anim-toggle" checked />
        <span class="switch-slider"></span>
      </label><br/><br/>
      <label class="switch-label">Auto-scroll carousel
        <input type="checkbox" id="autoscroll-toggle" checked />
        <span class="switch-slider"></span>
      </label><br/><br/>
      <button id="clear-storage" style="padding:10px 15px;background:#ff7f50;color:white;border:none;border-radius:10px;cursor:pointer;width:100%;">üßπ R√©initialiser donn√©es</button>
    </div>

  </div>


  <div style="text-align:center;margin-top:30px;">
  <button id="save-settings" 
          style="padding:12px 20px;background:#ff7f50;color:white;border:none;border-radius:12px;cursor:pointer;font-size:16px;">
    üíæ Enregistrer les param√®tres
  </button>
  <p id="save-confirm" style="color:green;font-weight:bold;display:none;margin-top:10px;">
    ‚úîÔ∏è Param√®tres enregistr√©s !
  </p>
</div>

</section>

<!-- STYLE SWITCH -->
<style>
.switch-label { display:flex;justify-content:space-between;align-items:center;font-size:16px;margin:8px 0; }
.switch-label input { display:none; }
.switch-slider {
  width:44px;height:22px;background:#ccc;border-radius:20px;position:relative;transition:0.3s;
}
.switch-slider::before {
  content:"";position:absolute;width:18px;height:18px;background:white;border-radius:50%;top:2px;left:2px;transition:0.3s;
}
.switch-label input:checked + .switch-slider {
  background:#ff7f50;
}
.switch-label input:checked + .switch-slider::before {
  transform:translateX(22px);
}
.switch-slider:hover { box-shadow:0 0 5px rgba(0,0,0,0.2); }

/* Th√®mes */
body.theme-rose { --accent:#ff69b4; }
body.theme-vert { --accent:#32cd32; }
body.theme-bleu { --accent:#1e90ff; }

/* Mode sombre pour les cards */
body.dark-mode .setting-card { background:#333; color:#fff; }
</style>

<!-- SCRIPT POUR LES PARAM√àTRES -->
<script>
function saveSetting(key, value) {
  localStorage.setItem(key, value);
}

function loadSetting(key, defaultValue) {
  return localStorage.getItem(key) ?? defaultValue;
}

// ----------------------
// UTILISATEUR
// ----------------------
const userName = document.getElementById('user-name');
const userEmail = document.getElementById('user-email');
const userAvatar = document.getElementById('user-avatar');
const avatarPreview = document.getElementById('avatar-preview');

userName.value = loadSetting('user-name','');
userEmail.value = loadSetting('user-email','');
userAvatar.value = loadSetting('user-avatar','');

[userName,userEmail,userAvatar].forEach(input=>{
  input.addEventListener('input', e=>{
    saveSetting(e.target.id,e.target.value);
  });
});

// Avatar preview automatique
if(userAvatar.value) {
  avatarPreview.src = userAvatar.value;
  avatarPreview.style.display = 'block';
}

userAvatar.addEventListener('input', e => {
  const url = e.target.value.trim();
  if(url) {
    avatarPreview.src = url;
    avatarPreview.style.display = 'block';
  } else {
    avatarPreview.style.display = 'none';
  }
});

// ----------------------
// APPARENCE
// ----------------------
const darkModeToggle = document.getElementById('darkmode-toggle');
const themeSelect = document.getElementById('theme-select');
const fontSizeRange = document.getElementById('fontsize-range');

darkModeToggle.checked = loadSetting('darkmode','false')==='true';
themeSelect.value = loadSetting('theme','default');
fontSizeRange.value = loadSetting('fontsize','16');

function applyAppearance(){
  document.body.classList.toggle('dark-mode', darkModeToggle.checked);
  document.body.style.fontSize = fontSizeRange.value + 'px';
  document.body.classList.remove('theme-rose','theme-vert','theme-bleu');
  if(themeSelect.value!=='default') document.body.classList.add('theme-'+themeSelect.value);
}

darkModeToggle.addEventListener('change', () => {
  saveSetting('darkmode', darkModeToggle.checked);
  applyAppearance();
});

themeSelect.addEventListener('change', () => {
  saveSetting('theme', themeSelect.value);
  applyAppearance();
});

fontSizeRange.addEventListener('input', () => {
  saveSetting('fontsize', fontSizeRange.value);
  applyAppearance();
});

applyAppearance();

// ----------------------
// PREFERENCES UTILISATEUR
// ----------------------
const favAnimal = document.getElementById('fav-animal');
const notifToggle = document.getElementById('notif-toggle');

favAnimal.value = loadSetting('fav-animal','chat');
notifToggle.checked = loadSetting('notif','false')==='true';

[favAnimal, notifToggle].forEach(el=>{
  el.addEventListener('change', e=>{
    saveSetting(e.target.id==='notif-toggle'?'notif':'fav-animal', e.target.value || e.target.checked);
  });
});

// ----------------------
// ACCESSIBILITE
// ----------------------
const screenReader = document.getElementById('screenreader-toggle');
const reduceAnim = document.getElementById('reduce-anim-toggle');
const contrast = document.getElementById('contrast-toggle');

screenReader.checked = loadSetting('screenreader','false')==='true';
reduceAnim.checked = loadSetting('reduce-anim','false')==='true';
contrast.checked = loadSetting('contrast','false')==='true';

screenReader.addEventListener('change', e=>saveSetting('screenreader', e.target.checked));
reduceAnim.addEventListener('change', e=>{
  saveSetting('reduce-anim', e.target.checked);
  document.body.style.transition = e.target.checked ? 'none' : 'opacity 0.4s';
});
contrast.addEventListener('change', e=>{
  saveSetting('contrast', e.target.checked);
  document.body.style.filter = e.target.checked ? 'contrast(120%)' : 'contrast(100%)';
});

document.body.style.transition = reduceAnim.checked ? 'none' : 'opacity 0.4s';
document.body.style.filter = contrast.checked ? 'contrast(120%)' : 'contrast(100%)';

// ----------------------
// COMPORTEMENT
// ----------------------
const animToggle = document.getElementById('anim-toggle');
const autoscrollToggle = document.getElementById('autoscroll-toggle');

animToggle.checked = loadSetting('anim','true')==='true';
autoscrollToggle.checked = loadSetting('autoscroll','true')==='true';

[animToggle, autoscrollToggle].forEach(el=>{
  el.addEventListener('change', e=>{
    saveSetting(e.target.id==='anim-toggle'?'anim':'autoscroll', e.target.checked);
  });
});

// ----------------------
// RESET
// ----------------------
document.getElementById('clear-storage').addEventListener('click', () => {
  localStorage.clear();
  alert('Donn√©es r√©initialis√©es !');
  location.reload();
});

// ----------------------
// BOUTON ENREGISTRER
// ----------------------
document.getElementById('save-settings').addEventListener('click', () => {
    
    // Tous les param√®tres sont d√©j√† dans localStorage,
    // donc ici on donne juste un feedback visuel.
    
    const confirm = document.getElementById('save-confirm');
    confirm.style.display = 'block';

    // Disparition du message apr√®s 2 secondes
    setTimeout(() => {
        confirm.style.display = 'none';
    }, 2000);
});

</script>
