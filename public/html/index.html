<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>AdopteUnAmi</title>

  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="../styles.css" />
</head>

<body>

<!-- =============================
     NAVBAR
============================= -->
<nav class="navbar">
  <div class="nav-left">
    <div class="nav-logo">
      <a href="index.html" class="logo-link">
  <img src="../assets/icon.png" class="emoji-icon"> AdopteUnAmi</a>
    </div>
  </div>

  <div class="hamburger" onclick="toggleMenu()">
    <span></span><span></span><span></span>
  </div>

  <div class="nav-right" id="navMenu">
    <a href="animal.html">Animaux</a>
    <a href="refuge.html">Refuges</a>
    <a href="swipe.html">Swipe</a>
    <a href="likes.html">Likes</a>
    <a href="login.html" style="background:var(--secondary-color); color:white;">Login</a>
  </div>
</nav>

<!-- =============================
     HEADER / HERO
============================= -->
<header id="home">
  <div class="header__container">

    <div class="header__image">
      <img src="../assets/header-bg.png" alt="header-bg" class="header__image-bg" />
      <img src="../assets/header.png" alt="Chien heureux">
    </div>

    <div class="header__content">
      <h4>Bienvenue sur</h4>
      <h1>Adopte<br><span>Un Ami</span></h1>
      <h2>Votre futur compagnon vous attend !</h2>

      <p>
        Découvrez chiens et chats à adopter partout en France,
        issus de refuges partenaires.
      </p>

      <div class="header__btn">
        <button onclick="location.href='swipe.html'">
          Swipe maintenant
          <span><i class="ri-arrow-right-line"></i></span>
        </button>
      </div>
    </div>

  </div>

  <div class="header__bottom"></div>
</header>

<!-- =============================
     RECHERCHE
============================= -->
<section id="search" class="section__container search-box">
  <h2 class="section__header">Trouvez votre compagnon</h2>

  <div class="filter-grid">
    <input type="text" id="searchInput" placeholder="Recherche...">

    <select id="filterType">
      <option value="">Tous les types</option>
      <option value="chien">Chiens</option>
      <option value="chat">Chats</option>
    </select>

    <select id="filterSex">
      <option value="">Tous les sexes</option>
      <option value="male">Mâle</option>
      <option value="femelle">Femelle</option>
    </select>
  
    <select id="filterRefuge">
      <option value="">Tous les refuges</option>
      <option value="Refuge de l'Espoir">Refuge de l'Espoir</option>
      <option value="SPA Paris">SPA Paris</option>
      <option value="Animaux Secours">Animaux Secours</option>
    </select>


    <button id="filter-btn" onclick="goToAnimals()">Filtrer</button>
  </div>
</section>



<!-- script linked à animal.html -->
<script>
  function toggleMenu() {
    document.getElementById("navMenu").classList.toggle("active");
  }

  function handleContact(e) {
    e.preventDefault();
    alert("Merci pour votre message :)");
    e.target.reset();
  }

  function goToAnimals() {
    const search = document.getElementById("searchInput").value;
    const type = document.getElementById("filterType").value;
    const sex = document.getElementById("filterSex").value;
    const refuge = document.getElementById("filterRefuge").value;


    const params = new URLSearchParams();
    if (search) params.append("search", search);
    if (type) params.append("type", type);
    if (sex) params.append("sex", sex);
    if (refuge) params.append("refuge", refuge);


    window.location.href = `animal.html?${params.toString()}`;
  }
</script>


<!-- =============================
     REFUGES
============================= -->
<section id="refuges" class="section__container">
  <h2 class="section__header">Nos Refuges</h2>

  <div class="carousel">
    <button class="arrowbtn arrowbtn-left" id="prevBtn">&#10094;</button>
    <div class="carousel__track" id="refugeCarousel"></div>
    <button class="arrowbtn arrowbtn-right" id="nextBtn">&#10095;</button>
  </div>
</section>


<!-- script linked à refuge.html -->
<script>
async function loadRefugesCarousel() {
  try {
    const response = await fetch("http://localhost:3000/api/refuges");
    const refuges = await response.json();

    const track = document.getElementById("refugeCarousel");
    track.innerHTML = "";

    // Part refuge cards
    refuges.forEach(refuge => {
      const card = document.createElement("div");
      card.className = "carousel__card";
      card.innerHTML = `
        <img src="../assets/${refuge.image}" alt="${refuge.name}">
        <h4>${refuge.name}</h4>
        <p>${refuge.city}</p>
      `;
      // rendre la carte est cliquable
      card.addEventListener("click", () => {
        window.location.href = `refuge.html?id=${refuge.id}`;
      });
      track.appendChild(card);
    });

    // Carte finale
    const allCard = document.createElement("div");
    allCard.className = "carousel__card all-refuges";
    allCard.innerHTML = `
      <h4>Voir toute la liste</h4>
      <p>Accédez à tous les refuges</p>
    `;
    allCard.addEventListener("click", () => {
      window.location.href = "refuge.html";
});
track.appendChild(allCard);


    // Nav fleches
    let index = 0;
    const cardWidth = track.querySelector(".carousel__card").offsetWidth + 30;

    document.getElementById("nextBtn").addEventListener("click", () => {
      if (index < track.children.length - 1) {
        index++;
        track.style.transform = `translateX(-${index * cardWidth}px)`;
      }
    });

    document.getElementById("prevBtn").addEventListener("click", () => {
      if (index > 0) {
        index--;
        track.style.transform = `translateX(-${index * cardWidth}px)`;
      }
    });
  } catch (err) {
    console.error("Erreur chargement refuges :", err);
  }
}

window.onload = loadRefugesCarousel;
</script>


<!-- =============================
     SWIPE (TEASER)
============================= -->
<section class="section__container encadre">
  <h2 class="section__header">Matchmaking</h2>

  <p style="text-align:center; max-width:600px; margin:0 auto 2rem;">
    Essayez notre système de swipe pour matcher avec
    l’animal qui vous correspond le mieux.
  </p>

  <div style="text-align:center;">
    <button id="filter-btn" onclick="location.href='swipe.html'">
      Tester le swipe
    </button>
  </div>
</section>

<!-- =============================
     DON
============================= -->
<section id="donations" class="section__container encadre">
  <h2 class="section__header"> Soutenez nos refuges</h2>

  <p style="text-align:center; max-width:600px; margin:0 auto 2rem;">
    Vos dons permettent aux refuges de nourrir, soigner et offrir une seconde chance aux animaux abandonnés. 
    <br> Merci pour votre soutien :)
  </p>

  <div class="donation-options">
    <button class="don-btn" onclick="donate('10')">Donner 10 €</button>
    <button class="don-btn" onclick="donate('20')">Donner 20 €</button>
    <button class="don-btn" onclick="donate('50')">Donner 50 €</button>
    <button class="don-btn" onclick="donate('custom')">Montant libre</button>
  </div>
</section>

<!-- mini script pour pop-up informatif -->
<script>
  function donate(amount) {
  if (amount === "custom") {
    const custom = prompt("Entrez le montant que vous souhaitez donner (€) :");
    if (custom) {
      alert(`Merci pour votre don de ${custom} €`);
    }
  } else {
    alert(`Merci pour votre don de ${amount} € `);
  }
}

</script>


<!-- =============================
     FOOTER
============================= -->
<footer class="site-footer">
  <div class="footer-container">

    <!-- Colonne 1 : Logo -->
    <div class="footer-col">
      <h4 class="logo">
      <img src="../assets/icon.png" class="emoji-icon" alt="logo">
      AdopteUnAmi
    </h4>

      <p>
        Plateforme de mise en relation entre refuges
        et futurs adoptants en France.
      </p>
    </div>

    <!-- Colonne 2 : Navigation -->
    <div class="footer-col">
      <h4>Navigation</h4>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="animal.html">Animaux</a></li>
        <li><a href="swipe.html">Swipe</a></li>
        <li><a href="likes.html">Likes</a></li>
      </ul>
    </div>

    <!-- Colonne 3 : Informations -->
    <div class="footer-col">
      <h4>Informations</h4>
      <ul>
        <li><a href="avis.html">Avis</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="mentionslegales.html">Mentions légales</a></li>
        <li><a href="paramètres.html">Paramètres</a></li>
      </ul>
    </div>

    <!-- Colonne 4 : Réseaux -->
    <div class="footer-col">
      <h4>Suivez-nous</h4>
      <div class="footer-socials">
        <a href="#"><i class="ri-facebook-fill"></i></a>
        <a href="#"><i class="ri-instagram-line"></i></a>
        <a href="#"><i class="ri-twitter-x-line"></i></a>
      </div>
    </div>

  </div>

  <div class="footer-bottom">
    © 2025 AdoptMe — Projet pédagogique • Tous droits réservés
  </div>
</footer>

<!-- =============================
     SCRIPTS
============================= -->
<script>
  function toggleMenu() {
    document.getElementById("navMenu").classList.toggle("active");
  }

  function handleContact(e) {
    e.preventDefault();
    alert("Merci pour votre message :)");
    e.target.reset();
  }
</script>

</body>
</html>
